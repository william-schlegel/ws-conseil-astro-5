---
import type { CollectionEntry } from "astro:content";
import { displayDate } from "../lib/utils";
import { getEntry } from "astro:content";

interface Props {
  project: CollectionEntry<"projetCollection">["data"];
  index: number;
}

const { project, index } = Astro.props;
const client = await getEntry("clientCollection", project.client.id);
---

<a
  href={`/project/${project.slug}`}
  class="flex flex-col bg-bg-white01 rounded-md p-4 w-[clamp(200px,100%,600px)] transition-[outline] ease-in-out duration-200 hover:outline-4 hover:outline-primary"
  style={`animation: project-appearance 0.8s
  var(--animation-power) ${index * 0.8}s;`}
>
  <div class="grid grid-cols-[80px_1fr] items-center gap-8">
    <div
      class="h-[80px] aspect-square rounded-full bg-white grid place-items-center"
    >
      {
        client?.data.image ? (
          <img
            src={client.data.image}
            alt=""
            width={60}
            class="bg-cover bg-center"
          />
        ) : (
          <img
            src="/site/logo-picto.png"
            class="bg-cover bg-center"
            width={60}
            height={60}
            alt=""
          />
        )
      }
    </div>
    <h3>{project.name}</h3>
  </div>
  <p class="date">
    {displayDate(project.startDate, project.endDate, project.running)}
  </p>
  {
    project.heroImage && (
      <img
        class="image-principale"
        src={project.heroImage}
        width={600}
        height={400}
        alt="Image principale du projet"
      />
    )
  }
  <p class="brief">{project.brief}</p>
  {/*(<Technos technos={project.technos} styleName="projects" />)*/}
  {
    /* 
    Array.isArray(project.categories) && (
      <ul class="categories">
        {project.categories.map((cat) => (
          <li>{cat.title}</li>
        ))}
      </ul>
    )
  */
  }
</a>
